{"ast":null,"code":"var _jsxFileName = \"D:\\\\My React Apps\\\\chess\\\\chess-frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport ChessAPI from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = new ChessAPI();\nconst initialBoard = [['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'], ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'], ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r']];\nconst pieceImages = {\n  'R': '/chess_pieces/white_rook.svg',\n  'N': '/chess_pieces/white_knight.svg',\n  'B': '/chess_pieces/white_bishop.svg',\n  'Q': '/chess_pieces/white_queen.svg',\n  'K': '/chess_pieces/white_king.svg',\n  'P': '/chess_pieces/white_pawn.svg',\n  'r': '/chess_pieces/black_rook.svg',\n  'n': '/chess_pieces/black_knight.svg',\n  'b': '/chess_pieces/black_bishop.svg',\n  'q': '/chess_pieces/black_queen.svg',\n  'k': '/chess_pieces/black_king.svg',\n  'p': '/chess_pieces/black_pawn.svg'\n};\n\n// Helper functions for chess logic\nconst isOnBoard = (row, col) => row >= 0 && row < 8 && col >= 0 && col < 8;\nconst isSameSide = (board, row1, col1, row2, col2) => {\n  const piece1 = board[row1][col1];\n  const piece2 = board[row2][col2];\n  if (!piece1 || !piece2) return false;\n  return piece1 === piece1.toUpperCase() && piece2 === piece2.toUpperCase() || piece1 === piece1.toLowerCase() && piece2 === piece2.toLowerCase();\n};\nconst getLinearMoves = (board, row, col, directions) => {\n  const moves = [];\n  const piece = board[row][col];\n  directions.forEach(([rOffset, cOffset]) => {\n    let newRow = row + rOffset;\n    let newCol = col + cOffset;\n    while (isOnBoard(newRow, newCol) && board[newRow][newCol] === '') {\n      moves.push([newRow, newCol]);\n      newRow += rOffset;\n      newCol += cOffset;\n    }\n    if (isOnBoard(newRow, newCol) && !isSameSide(board, row, col, newRow, newCol)) {\n      moves.push([newRow, newCol]);\n    }\n  });\n  return moves;\n};\nconst getPawnMoves = (board, piece, row, col) => {\n  const moves = [];\n  const direction = piece === 'p' ? -1 : 1;\n  const startRow = piece === 'p' ? 6 : 1;\n\n  // Forward move\n  if (isOnBoard(row + direction, col) && board[row + direction][col] === '') {\n    moves.push([row + direction, col]);\n\n    // Double move from starting position\n    if (row === startRow && board[row + 2 * direction][col] === '') {\n      moves.push([row + 2 * direction, col]);\n    }\n  }\n\n  // Diagonal captures\n  if (isOnBoard(row + direction, col - 1) && board[row + direction][col - 1] !== '' && !isSameSide(board, row, col, row + direction, col - 1)) {\n    moves.push([row + direction, col - 1]);\n  }\n  if (isOnBoard(row + direction, col + 1) && board[row + direction][col + 1] !== '' && !isSameSide(board, row, col, row + direction, col + 1)) {\n    moves.push([row + direction, col + 1]);\n  }\n  return moves;\n};\nconst getRookMoves = (board, row, col) => {\n  return getLinearMoves(board, row, col, [[1, 0], [-1, 0], [0, 1], [0, -1]]);\n};\nconst getBishopMoves = (board, row, col) => {\n  return getLinearMoves(board, row, col, [[1, 1], [-1, -1], [1, -1], [-1, 1]]);\n};\nconst getKnightMoves = (board, row, col) => {\n  const knightOffsets = [[2, 1], [2, -1], [-2, 1], [-2, -1], [1, 2], [1, -2], [-1, 2], [-1, -2]];\n  const moves = [];\n  knightOffsets.forEach(([rOffset, cOffset]) => {\n    const newRow = row + rOffset;\n    const newCol = col + cOffset;\n    if (isOnBoard(newRow, newCol) && !isSameSide(board, row, col, newRow, newCol)) {\n      moves.push([newRow, newCol]);\n    }\n  });\n  return moves;\n};\nconst findKingPosition = (board, king) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === king) {\n        return [row, col];\n      }\n    }\n  }\n  return null;\n};\nconst isKingAdjacent = (board, row, col, opponentKing) => {\n  const adjacentOffsets = [[1, 0], [1, 1], [1, -1], [0, 1], [0, -1], [-1, 0], [-1, 1], [-1, -1]];\n  const kingPos = findKingPosition(board, opponentKing);\n  if (!kingPos) return false;\n  const [kingRow, kingCol] = kingPos;\n  return adjacentOffsets.some(([rOffset, cOffset]) => {\n    return row + rOffset === kingRow && col + cOffset === kingCol;\n  });\n};\nconst getKingMoves = (board, row, col) => {\n  const kingOffsets = [[1, 0], [1, 1], [1, -1], [0, 1], [0, -1], [-1, 0], [-1, 1], [-1, -1]];\n  const moves = [];\n  const piece = board[row][col];\n  const opponentKing = piece === 'K' ? 'k' : 'K';\n  kingOffsets.forEach(([rOffset, cOffset]) => {\n    const newRow = row + rOffset;\n    const newCol = col + cOffset;\n    if (isOnBoard(newRow, newCol) && !isSameSide(board, row, col, newRow, newCol) && !isKingAdjacent(board, newRow, newCol, opponentKing)) {\n      moves.push([newRow, newCol]);\n    }\n  });\n  return moves;\n};\nconst isKingInCheck = (board, kingPosition, king) => {\n  if (!kingPosition) return false;\n  const [kingRow, kingCol] = kingPosition;\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (piece && piece === piece.toLowerCase() !== (king === king.toLowerCase())) {\n        if (piece.toUpperCase() !== 'K') {\n          const validMoves = getValidMoves(board, piece, row, col);\n          if (validMoves.some(([r, c]) => r === kingRow && c === kingCol)) {\n            return true;\n          }\n        }\n      }\n    }\n  }\n  return false;\n};\nconst getValidMoves = (board, piece, row, col) => {\n  switch (piece.toUpperCase()) {\n    case 'P':\n      return getPawnMoves(board, piece, row, col);\n    case 'R':\n      return getRookMoves(board, row, col);\n    case 'N':\n      return getKnightMoves(board, row, col);\n    case 'B':\n      return getBishopMoves(board, row, col);\n    case 'Q':\n      return [...getRookMoves(board, row, col), ...getBishopMoves(board, row, col)];\n    case 'K':\n      return getKingMoves(board, row, col);\n    default:\n      return [];\n  }\n};\nconst GameModeSelector = ({\n  onSelectMode\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  style: {\n    margin: '20px',\n    textAlign: 'center'\n  },\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"Select Game Mode\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => onSelectMode('local'),\n    style: {\n      margin: '10px',\n      padding: '10px 20px'\n    },\n    children: \"Local Game (Same Device)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => onSelectMode('online'),\n    style: {\n      margin: '10px',\n      padding: '10px 20px'\n    },\n    children: \"Online Multiplayer\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => onSelectMode('computer'),\n    style: {\n      margin: '10px',\n      padding: '10px 20px'\n    },\n    children: \"vs Computer (Coming Soon)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 205,\n  columnNumber: 3\n}, this);\n_c = GameModeSelector;\nconst Chessboard = ({\n  gameMode,\n  gameId\n}) => {\n  _s();\n  const [board, setBoard] = useState(initialBoard);\n  const [selected, setSelected] = useState(null);\n  const [validMoves, setValidMoves] = useState([]);\n  const [turn, setTurn] = useState(false);\n  const [hasMoved, setHasMoved] = useState({\n    whiteKing: false,\n    blackKing: false,\n    whiteRookLeft: false,\n    whiteRookRight: false,\n    blackRookLeft: false,\n    blackRookRight: false\n  });\n  const [gameStatus, setGameStatus] = useState('active');\n  const [isOnlineGame, setIsOnlineGame] = useState(false);\n  useEffect(() => {\n    if (gameId && gameMode !== 'local') {\n      setIsOnlineGame(true);\n      // Poll for game updates in online mode\n      const interval = setInterval(async () => {\n        try {\n          const response = await api.getGame(gameId);\n          if (response.game) {\n            setBoard(response.game.board);\n            setTurn(response.game.turn);\n            setHasMoved(response.game.hasMoved);\n            setGameStatus(response.game.status);\n          }\n        } catch (error) {\n          console.error('Error fetching game state:', error);\n        }\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [gameId, gameMode]);\n  const handleClick = async (rowIndex, colIndex) => {\n    if (selected) {\n      const [fromRow, fromCol] = selected;\n      if (isSameSide(board, fromRow, fromCol, rowIndex, colIndex)) {\n        setSelected([rowIndex, colIndex]);\n        setValidMoves(getValidMoves(board, board[rowIndex][colIndex], rowIndex, colIndex));\n        return;\n      }\n      if (isValidMove([rowIndex, colIndex])) {\n        const from = [fromRow, fromCol];\n        const to = [rowIndex, colIndex];\n        if (isOnlineGame) {\n          // Make move via API\n          try {\n            const response = await api.makeMove(gameId, from, to);\n            if (response.success) {\n              setBoard(response.game.board);\n              setTurn(response.game.turn);\n              setHasMoved(response.game.hasMoved);\n              setGameStatus(response.game.status);\n            } else {\n              alert('Invalid move: ' + response.error);\n            }\n          } catch (error) {\n            console.error('Error making move:', error);\n            alert('Error making move. Please try again.');\n          }\n        } else {\n          // Local game logic\n          makeLocalMove(from, to);\n        }\n      }\n      setSelected(null);\n      setValidMoves([]);\n    } else {\n      const piece = board[rowIndex][colIndex];\n      if (piece && piece === piece.toLowerCase() === turn) {\n        setSelected([rowIndex, colIndex]);\n        setValidMoves(getValidMoves(board, piece, rowIndex, colIndex));\n      }\n    }\n  };\n  const makeLocalMove = (from, to) => {\n    const [fromRow, fromCol] = from;\n    const [toRow, toCol] = to;\n    const piece = board[fromRow][fromCol];\n    const newBoard = board.map(row => [...row]);\n    newBoard[toRow][toCol] = newBoard[fromRow][fromCol];\n    newBoard[fromRow][fromCol] = '';\n    const val = checkForCheckOrMate(newBoard);\n    if (!(val === \"black\" && turn) && !(val === \"white\" && !turn)) {\n      // Update hasMoved flags\n      const newHasMoved = {\n        ...hasMoved\n      };\n      if (piece === 'K') newHasMoved.whiteKing = true;\n      if (piece === 'k') newHasMoved.blackKing = true;\n      if (piece === 'r' && fromCol === 0 && fromRow === 7) newHasMoved.blackRookLeft = true;\n      if (piece === 'r' && fromCol === 7 && fromRow === 7) newHasMoved.blackRookRight = true;\n      if (piece === 'R' && fromCol === 0 && fromRow === 0) newHasMoved.whiteRookLeft = true;\n      if (piece === 'R' && fromCol === 7 && fromRow === 0) newHasMoved.whiteRookRight = true;\n\n      // Handle castling\n      if (piece === 'K' && fromRow === 0 && fromCol === 4) {\n        if (toRow === 0 && toCol === 2) {\n          newBoard[0][0] = '';\n          newBoard[0][3] = 'R';\n        } else if (toRow === 0 && toCol === 6) {\n          newBoard[0][7] = '';\n          newBoard[0][5] = 'R';\n        }\n      } else if (piece === 'k' && fromRow === 7 && fromCol === 4) {\n        if (toRow === 7 && toCol === 2) {\n          newBoard[7][0] = '';\n          newBoard[7][3] = 'r';\n        } else if (toRow === 7 && toCol === 6) {\n          newBoard[7][7] = '';\n          newBoard[7][5] = 'r';\n        }\n      }\n      setTurn(prevTurn => !prevTurn);\n      setBoard(newBoard);\n      setHasMoved(newHasMoved);\n    }\n  };\n  const isValidMove = position => {\n    return validMoves.some(([row, col]) => row === position[0] && col === position[1]);\n  };\n  const getSquareClassName = (rowIndex, colIndex) => {\n    const isValid = isValidMove([rowIndex, colIndex]);\n    const pieceAtPosition = board[rowIndex][colIndex];\n    if (selected) {\n      const isOpponentPiece = pieceAtPosition && isSameSide(board, selected[0], selected[1], rowIndex, colIndex) === false;\n      if (isValid && isOpponentPiece) return 'square red';\n      if (isValid) return 'square yellow';\n    }\n    return `square ${(rowIndex + colIndex) % 2 === 0 ? 'white' : 'black'}`;\n  };\n  const checkForCheckOrMate = board => {\n    const whiteKingPosition = findKingPosition(board, 'K');\n    const blackKingPosition = findKingPosition(board, 'k');\n    const whiteInCheck = isKingInCheck(board, whiteKingPosition, 'K');\n    const blackInCheck = isKingInCheck(board, blackKingPosition, 'k');\n    if (whiteInCheck) return \"white\";\n    if (blackInCheck) return \"black\";\n    return \"\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chessboard\",\n    children: [board.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: row.map((piece, colIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getSquareClassName(rowIndex, colIndex),\n        onClick: () => handleClick(rowIndex, colIndex),\n        children: piece && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: pieceImages[piece],\n          alt: piece,\n          className: \"piece\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 25\n        }, this)\n      }, colIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 13\n      }, this))\n    }, rowIndex, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: turn ? 'Black turn' : 'White Turn'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: checkForCheckOrMate(board) ? \"Check!\" : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), gameStatus !== 'active' && /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: 'red'\n      },\n      children: [\"Game Over: \", gameStatus.toUpperCase()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 9\n    }, this), isOnlineGame && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Game ID: \", gameId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 375,\n    columnNumber: 5\n  }, this);\n};\n_s(Chessboard, \"V5EoTTrvFnPNlxcY1flMZkJshjM=\");\n_c2 = Chessboard;\nfunction App() {\n  _s2();\n  const [gameMode, setGameMode] = useState(null);\n  const [gameId, setGameId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const handleSelectMode = async mode => {\n    setLoading(true);\n    try {\n      const response = await api.createGame(mode);\n      if (response.success) {\n        setGameMode(mode);\n        setGameId(response.game.id);\n        console.log('Game created:', response.game);\n      }\n    } catch (error) {\n      console.error('Error creating game:', error);\n      alert('Error creating game. Make sure the backend server is running.');\n    }\n    setLoading(false);\n  };\n  const resetGame = () => {\n    setGameMode(null);\n    setGameId(null);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Creating game...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Chess Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 7\n    }, this), !gameMode ? /*#__PURE__*/_jsxDEV(GameModeSelector, {\n      onSelectMode: handleSelectMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetGame,\n        style: {\n          margin: '10px'\n        },\n        children: \"New Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Chessboard, {\n        gameMode: gameMode,\n        gameId: gameId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 432,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"9rTjMlTRl2QqVYOf3KPUsrBN3r8=\");\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"GameModeSelector\");\n$RefreshReg$(_c2, \"Chessboard\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useEffect","ChessAPI","jsxDEV","_jsxDEV","api","initialBoard","pieceImages","isOnBoard","row","col","isSameSide","board","row1","col1","row2","col2","piece1","piece2","toUpperCase","toLowerCase","getLinearMoves","directions","moves","piece","forEach","rOffset","cOffset","newRow","newCol","push","getPawnMoves","direction","startRow","getRookMoves","getBishopMoves","getKnightMoves","knightOffsets","findKingPosition","king","isKingAdjacent","opponentKing","adjacentOffsets","kingPos","kingRow","kingCol","some","getKingMoves","kingOffsets","isKingInCheck","kingPosition","validMoves","getValidMoves","r","c","GameModeSelector","onSelectMode","style","margin","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","padding","_c","Chessboard","gameMode","gameId","_s","setBoard","selected","setSelected","setValidMoves","turn","setTurn","hasMoved","setHasMoved","whiteKing","blackKing","whiteRookLeft","whiteRookRight","blackRookLeft","blackRookRight","gameStatus","setGameStatus","isOnlineGame","setIsOnlineGame","interval","setInterval","response","getGame","game","status","error","console","clearInterval","handleClick","rowIndex","colIndex","fromRow","fromCol","isValidMove","from","to","makeMove","success","alert","makeLocalMove","toRow","toCol","newBoard","map","val","checkForCheckOrMate","newHasMoved","prevTurn","position","getSquareClassName","isValid","pieceAtPosition","isOpponentPiece","whiteKingPosition","blackKingPosition","whiteInCheck","blackInCheck","className","src","alt","color","_c2","App","_s2","setGameMode","setGameId","loading","setLoading","handleSelectMode","mode","createGame","id","log","resetGame","_c3","$RefreshReg$"],"sources":["D:/My React Apps/chess/chess-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport ChessAPI from './api';\n\nconst api = new ChessAPI();\n\nconst initialBoard = [\n  ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'],\n  ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],\n  ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r']\n];\n\nconst pieceImages = {\n  'R': '/chess_pieces/white_rook.svg',\n  'N': '/chess_pieces/white_knight.svg',\n  'B': '/chess_pieces/white_bishop.svg',\n  'Q': '/chess_pieces/white_queen.svg',\n  'K': '/chess_pieces/white_king.svg',\n  'P': '/chess_pieces/white_pawn.svg',\n  'r': '/chess_pieces/black_rook.svg',\n  'n': '/chess_pieces/black_knight.svg',\n  'b': '/chess_pieces/black_bishop.svg',\n  'q': '/chess_pieces/black_queen.svg',\n  'k': '/chess_pieces/black_king.svg',\n  'p': '/chess_pieces/black_pawn.svg'\n};\n\n// Helper functions for chess logic\nconst isOnBoard = (row, col) => row >= 0 && row < 8 && col >= 0 && col < 8;\n\nconst isSameSide = (board, row1, col1, row2, col2) => {\n  const piece1 = board[row1][col1];\n  const piece2 = board[row2][col2];\n  if (!piece1 || !piece2) return false;\n  return (piece1 === piece1.toUpperCase() && piece2 === piece2.toUpperCase()) ||\n         (piece1 === piece1.toLowerCase() && piece2 === piece2.toLowerCase());\n};\n\nconst getLinearMoves = (board, row, col, directions) => {\n  const moves = [];\n  const piece = board[row][col];\n  \n  directions.forEach(([rOffset, cOffset]) => {\n    let newRow = row + rOffset;\n    let newCol = col + cOffset;\n    \n    while (isOnBoard(newRow, newCol) && board[newRow][newCol] === '') {\n      moves.push([newRow, newCol]);\n      newRow += rOffset;\n      newCol += cOffset;\n    }\n    \n    if (isOnBoard(newRow, newCol) && !isSameSide(board, row, col, newRow, newCol)) {\n      moves.push([newRow, newCol]);\n    }\n  });\n  \n  return moves;\n};\n\nconst getPawnMoves = (board, piece, row, col) => {\n  const moves = [];\n  const direction = piece === 'p' ? -1 : 1;\n  const startRow = piece === 'p' ? 6 : 1;\n\n  // Forward move\n  if (isOnBoard(row + direction, col) && board[row + direction][col] === '') {\n    moves.push([row + direction, col]);\n    \n    // Double move from starting position\n    if (row === startRow && board[row + 2 * direction][col] === '') {\n      moves.push([row + 2 * direction, col]);\n    }\n  }\n\n  // Diagonal captures\n  if (isOnBoard(row + direction, col - 1) && \n      board[row + direction][col - 1] !== '' && \n      !isSameSide(board, row, col, row + direction, col - 1)) {\n    moves.push([row + direction, col - 1]);\n  }\n  if (isOnBoard(row + direction, col + 1) && \n      board[row + direction][col + 1] !== '' && \n      !isSameSide(board, row, col, row + direction, col + 1)) {\n    moves.push([row + direction, col + 1]);\n  }\n\n  return moves;\n};\n\nconst getRookMoves = (board, row, col) => {\n  return getLinearMoves(board, row, col, [[1, 0], [-1, 0], [0, 1], [0, -1]]);\n};\n\nconst getBishopMoves = (board, row, col) => {\n  return getLinearMoves(board, row, col, [[1, 1], [-1, -1], [1, -1], [-1, 1]]);\n};\n\nconst getKnightMoves = (board, row, col) => {\n  const knightOffsets = [\n    [2, 1], [2, -1], [-2, 1], [-2, -1],\n    [1, 2], [1, -2], [-1, 2], [-1, -2]\n  ];\n  const moves = [];\n  \n  knightOffsets.forEach(([rOffset, cOffset]) => {\n    const newRow = row + rOffset;\n    const newCol = col + cOffset;\n    if (isOnBoard(newRow, newCol) && !isSameSide(board, row, col, newRow, newCol)) {\n      moves.push([newRow, newCol]);\n    }\n  });\n  \n  return moves;\n};\n\nconst findKingPosition = (board, king) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === king) {\n        return [row, col];\n      }\n    }\n  }\n  return null;\n};\n\nconst isKingAdjacent = (board, row, col, opponentKing) => {\n  const adjacentOffsets = [\n    [1, 0], [1, 1], [1, -1], [0, 1],\n    [0, -1], [-1, 0], [-1, 1], [-1, -1]\n  ];\n  const kingPos = findKingPosition(board, opponentKing);\n  if (!kingPos) return false;\n  \n  const [kingRow, kingCol] = kingPos;\n  return adjacentOffsets.some(([rOffset, cOffset]) => {\n    return row + rOffset === kingRow && col + cOffset === kingCol;\n  });\n};\n\nconst getKingMoves = (board, row, col) => {\n  const kingOffsets = [\n    [1, 0], [1, 1], [1, -1], [0, 1],\n    [0, -1], [-1, 0], [-1, 1], [-1, -1]\n  ];\n  const moves = [];\n  const piece = board[row][col];\n  const opponentKing = piece === 'K' ? 'k' : 'K';\n  \n  kingOffsets.forEach(([rOffset, cOffset]) => {\n    const newRow = row + rOffset;\n    const newCol = col + cOffset;\n    \n    if (isOnBoard(newRow, newCol) && \n        !isSameSide(board, row, col, newRow, newCol) &&\n        !isKingAdjacent(board, newRow, newCol, opponentKing)) {\n      moves.push([newRow, newCol]);\n    }\n  });\n\n  return moves;\n};\n\nconst isKingInCheck = (board, kingPosition, king) => {\n  if (!kingPosition) return false;\n  \n  const [kingRow, kingCol] = kingPosition;\n  \n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      \n      if (piece && (piece === piece.toLowerCase()) !== (king === king.toLowerCase())) {\n        if (piece.toUpperCase() !== 'K') {\n          const validMoves = getValidMoves(board, piece, row, col);\n          if (validMoves.some(([r, c]) => r === kingRow && c === kingCol)) {\n            return true;\n          }\n        }\n      }\n    }\n  }\n  return false;\n};\n\nconst getValidMoves = (board, piece, row, col) => {\n  switch (piece.toUpperCase()) {\n    case 'P': return getPawnMoves(board, piece, row, col);\n    case 'R': return getRookMoves(board, row, col);\n    case 'N': return getKnightMoves(board, row, col);\n    case 'B': return getBishopMoves(board, row, col);\n    case 'Q': return [...getRookMoves(board, row, col), ...getBishopMoves(board, row, col)];\n    case 'K': return getKingMoves(board, row, col);\n    default: return [];\n  }\n};\n\nconst GameModeSelector = ({ onSelectMode }) => (\n  <div style={{ margin: '20px', textAlign: 'center' }}>\n    <h2>Select Game Mode</h2>\n    <button onClick={() => onSelectMode('local')} style={{ margin: '10px', padding: '10px 20px' }}>\n      Local Game (Same Device)\n    </button>\n    <button onClick={() => onSelectMode('online')} style={{ margin: '10px', padding: '10px 20px' }}>\n      Online Multiplayer\n    </button>\n    <button onClick={() => onSelectMode('computer')} style={{ margin: '10px', padding: '10px 20px' }}>\n      vs Computer (Coming Soon)\n    </button>\n  </div>\n);\n\nconst Chessboard = ({ gameMode, gameId }) => {\n  const [board, setBoard] = useState(initialBoard);\n  const [selected, setSelected] = useState(null);\n  const [validMoves, setValidMoves] = useState([]);\n  const [turn, setTurn] = useState(false);\n  const [hasMoved, setHasMoved] = useState({\n    whiteKing: false, blackKing: false,\n    whiteRookLeft: false, whiteRookRight: false,\n    blackRookLeft: false, blackRookRight: false\n  });\n  const [gameStatus, setGameStatus] = useState('active');\n  const [isOnlineGame, setIsOnlineGame] = useState(false);\n\n  useEffect(() => {\n    if (gameId && gameMode !== 'local') {\n      setIsOnlineGame(true);\n      // Poll for game updates in online mode\n      const interval = setInterval(async () => {\n        try {\n          const response = await api.getGame(gameId);\n          if (response.game) {\n            setBoard(response.game.board);\n            setTurn(response.game.turn);\n            setHasMoved(response.game.hasMoved);\n            setGameStatus(response.game.status);\n          }\n        } catch (error) {\n          console.error('Error fetching game state:', error);\n        }\n      }, 1000);\n\n      return () => clearInterval(interval);\n    }\n  }, [gameId, gameMode]);\n\n  const handleClick = async (rowIndex, colIndex) => {\n    if (selected) {\n      const [fromRow, fromCol] = selected;\n      \n      if (isSameSide(board, fromRow, fromCol, rowIndex, colIndex)) {\n        setSelected([rowIndex, colIndex]);\n        setValidMoves(getValidMoves(board, board[rowIndex][colIndex], rowIndex, colIndex));\n        return;\n      }\n      \n      if (isValidMove([rowIndex, colIndex])) {\n        const from = [fromRow, fromCol];\n        const to = [rowIndex, colIndex];\n        \n        if (isOnlineGame) {\n          // Make move via API\n          try {\n            const response = await api.makeMove(gameId, from, to);\n            if (response.success) {\n              setBoard(response.game.board);\n              setTurn(response.game.turn);\n              setHasMoved(response.game.hasMoved);\n              setGameStatus(response.game.status);\n            } else {\n              alert('Invalid move: ' + response.error);\n            }\n          } catch (error) {\n            console.error('Error making move:', error);\n            alert('Error making move. Please try again.');\n          }\n        } else {\n          // Local game logic\n          makeLocalMove(from, to);\n        }\n      }\n      setSelected(null);\n      setValidMoves([]);\n    } else {\n      const piece = board[rowIndex][colIndex];\n      if (piece && ((piece === piece.toLowerCase()) === turn)) {\n        setSelected([rowIndex, colIndex]);\n        setValidMoves(getValidMoves(board, piece, rowIndex, colIndex));\n      }\n    }\n  };\n\n  const makeLocalMove = (from, to) => {\n    const [fromRow, fromCol] = from;\n    const [toRow, toCol] = to;\n    const piece = board[fromRow][fromCol];\n\n    const newBoard = board.map((row) => [...row]);\n    newBoard[toRow][toCol] = newBoard[fromRow][fromCol];\n    newBoard[fromRow][fromCol] = '';\n    \n    const val = checkForCheckOrMate(newBoard);\n\n    if (!(val === \"black\" && turn) && !(val === \"white\" && !turn)) {\n      // Update hasMoved flags\n      const newHasMoved = { ...hasMoved };\n      if (piece === 'K') newHasMoved.whiteKing = true;\n      if (piece === 'k') newHasMoved.blackKing = true;\n      if (piece === 'r' && fromCol === 0 && fromRow === 7) newHasMoved.blackRookLeft = true;\n      if (piece === 'r' && fromCol === 7 && fromRow === 7) newHasMoved.blackRookRight = true;\n      if (piece === 'R' && fromCol === 0 && fromRow === 0) newHasMoved.whiteRookLeft = true;\n      if (piece === 'R' && fromCol === 7 && fromRow === 0) newHasMoved.whiteRookRight = true;\n      \n      // Handle castling\n      if (piece === 'K' && fromRow === 0 && fromCol === 4) {\n        if (toRow === 0 && toCol === 2) {\n          newBoard[0][0] = '';\n          newBoard[0][3] = 'R';\n        } else if (toRow === 0 && toCol === 6) {\n          newBoard[0][7] = '';\n          newBoard[0][5] = 'R';\n        }\n      } else if (piece === 'k' && fromRow === 7 && fromCol === 4) {\n        if (toRow === 7 && toCol === 2) {\n          newBoard[7][0] = '';\n          newBoard[7][3] = 'r';\n        } else if (toRow === 7 && toCol === 6) {\n          newBoard[7][7] = '';\n          newBoard[7][5] = 'r';\n        }\n      }\n      \n      setTurn((prevTurn) => !prevTurn);\n      setBoard(newBoard);\n      setHasMoved(newHasMoved);\n    }\n  };\n\n  const isValidMove = (position) => {\n    return validMoves.some(([row, col]) => row === position[0] && col === position[1]);\n  };\n\n  const getSquareClassName = (rowIndex, colIndex) => {\n    const isValid = isValidMove([rowIndex, colIndex]);\n    const pieceAtPosition = board[rowIndex][colIndex];\n    \n    if (selected) {\n      const isOpponentPiece = pieceAtPosition && isSameSide(board, selected[0], selected[1], rowIndex, colIndex) === false;\n      if (isValid && isOpponentPiece) return 'square red';\n      if (isValid) return 'square yellow';\n    }\n\n    return `square ${(rowIndex + colIndex) % 2 === 0 ? 'white' : 'black'}`;\n  };\n\n  const checkForCheckOrMate = (board) => {\n    const whiteKingPosition = findKingPosition(board, 'K');\n    const blackKingPosition = findKingPosition(board, 'k');\n    const whiteInCheck = isKingInCheck(board, whiteKingPosition, 'K');\n    const blackInCheck = isKingInCheck(board, blackKingPosition, 'k');\n    \n    if (whiteInCheck) return \"white\";\n    if (blackInCheck) return \"black\";\n    return \"\";\n  };\n\n  return (\n    <div className=\"chessboard\">\n      {board.map((row, rowIndex) => (\n        <div key={rowIndex} className=\"row\">\n          {row.map((piece, colIndex) => (\n            <div\n              key={colIndex}\n              className={getSquareClassName(rowIndex, colIndex)}\n              onClick={() => handleClick(rowIndex, colIndex)}\n            >\n              {piece && <img src={pieceImages[piece]} alt={piece} className=\"piece\" />}\n            </div>\n          ))}\n        </div>\n      ))}\n      <h1>{turn ? 'Black turn' : 'White Turn'}</h1>\n      <h1>{checkForCheckOrMate(board) ? \"Check!\" : \"\"}</h1>\n      {gameStatus !== 'active' && (\n        <h1 style={{ color: 'red' }}>\n          Game Over: {gameStatus.toUpperCase()}\n        </h1>\n      )}\n      {isOnlineGame && <p>Game ID: {gameId}</p>}\n    </div>\n  );\n};\n\nfunction App() {\n  const [gameMode, setGameMode] = useState(null);\n  const [gameId, setGameId] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleSelectMode = async (mode) => {\n    setLoading(true);\n    try {\n      const response = await api.createGame(mode);\n      if (response.success) {\n        setGameMode(mode);\n        setGameId(response.game.id);\n        console.log('Game created:', response.game);\n      }\n    } catch (error) {\n      console.error('Error creating game:', error);\n      alert('Error creating game. Make sure the backend server is running.');\n    }\n    setLoading(false);\n  };\n\n  const resetGame = () => {\n    setGameMode(null);\n    setGameId(null);\n  };\n\n  if (loading) {\n    return <div className=\"App\"><h2>Creating game...</h2></div>;\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Chess Game</h1>\n      {!gameMode ? (\n        <GameModeSelector onSelectMode={handleSelectMode} />\n      ) : (\n        <div>\n          <button onClick={resetGame} style={{ margin: '10px' }}>\n            New Game\n          </button>\n          <Chessboard gameMode={gameMode} gameId={gameId} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}